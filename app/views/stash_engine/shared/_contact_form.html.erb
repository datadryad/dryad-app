<% subjects = [
    'Question about submission process',
    'Status of my dataset',
    'Reporting an issue with my dataset',
    'Reporting an issue with someone else\'s dataset',
    'Action Required',
    'Feature request',
    'API request',
    'Other'
]%>

<div class="callout" id="contact_form">
<%= form_with(url: stash_url_helpers.contact_helpdesk_path, method: :post, local: false) do |form| %>
  <% if local_assigns.key?(:identifier) %>
    <%= form.hidden_field :identifier, value: identifier %> 
  <% end %>
  <div class="c-input">
    <%= form.label :subject, 'Help needed with:', class: 'c-input__label' %>
    <%= form.select :subject, options_for_select(subjects), {include_blank: true}, {class: 'c-input__select', required: true} %>
  </div>
  <div class="c-input__inline">
    <div class="c-input">
      <%= form.label :sname, "Your full name:" %>
      <%= form.text_field :sname, class: 'c-input__text', autocomplete: 'name', required: true, value: current_user ? "#{current_user&.first_name} #{current_user&.last_name}" : '' %>
    </div>
    <div class="c-input">
      <%= form.label :email, "Your email address:" %>
      <%= form.email_field :email, required: true, class: 'c-input__text', autocomplete: 'email', value: current_user&.email %>
    </div>
  </div>
  <div class="c-input">
    <label for="body" class="c-input__label--required">Describe your issue or question:</label>
    <textarea class="c-input__textarea" style="width:100%" rows="8" required="required" name="body" id="body"></textarea>
  </div>
  <p style="display: flex; align-items: baseline; justify-content: space-between; flex-wrap: wrap; gap: 2ch">
    <span style="color: rgb(209, 44, 29);"><b>*</b> Fields are required</span>
    <button type="submit" class="o-button__plain-text1">Contact the helpdesk</button>
  </p>
<% end %>
</div>