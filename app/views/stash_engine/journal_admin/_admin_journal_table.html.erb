<div class="table-wrapper">
<table class="c-lined-table">
  <thead>
    <tr>
      <th class="c-lined-table__sort <%= sort_display('title') %>">
        <%= sortable_column_head sort_field: 'title', title: 'Title' %>
      </th>
      <th class="c-lined-table__sort <%= sort_display('issn') %>">
        <%= sortable_column_head sort_field: 'issn', title: 'ISSN(s)' %>
      </th>
      <th class="c-lined-table__sort <%= sort_display('payment_plan_type') %>">
        <%= sortable_column_head sort_field: 'payment_plan_type', title: 'Payment plan' %>
      </th>
      <th class="c-admin-table">
        Publication contacts
      </th>
      <th class="c-admin-table">
        Review contacts
      </th>
      <th class="c-lined-table__sort <%= sort_display('default_to_ppr') %>">
        <%= sortable_column_head sort_field: 'default_to_ppr', title: 'PPR Default' %>
      </th>
      <th class="c-admin-table">
        Sponsor
      </th>
    </tr>
  </thead>

<tbody>  
  <% journals.each do |j| %>
    <tr class="c-lined-table__row">
      <td><%= j.title %></td>
      <td>
        <div class="c-lined-table__with-actions">
          <div class="c-lined-table__data" id="issn_<%= j.id %>">
            <%= j.issn_array.join(", ") %>
          </div>
          <div class="c-lined-table__actions">
            <%= form_with(url: journal_popup_path(id: j.id, field: 'issn'), method: :get, local: false) do %>
              <button class="c-admin-edit-icon" aria-label="Edit ISSNs" alt="Edit ISSNs">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </button>
            <% end %>
          </div>
        </div>
      </td>
      <td>
        <div class="c-lined-table__with-actions">
          <div class="c-lined-table__data" id="payment_plan_type_<%= j.id %>">
            <%= j.payment_plan_type&.capitalize %>
          </div>
          <div class="c-lined-table__actions">
            <%= form_with(url: journal_popup_path(id: j.id, field: 'payment_plan_type'), method: :get, local: false) do %>
              <button class="c-admin-edit-icon" aria-label="Edit payment plan" alt="Edit payment plan">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </button>
            <% end %>
          </div>
        </div>
      </td>
      <td>
        <div class="c-lined-table__with-actions">
          <div class="c-lined-table__data" id="notify_contacts_<%= j.id %>">
            <%= j.notify_contacts&.join(', ') %>
          </div>
          <div class="c-lined-table__actions">
            <%= form_with(url: journal_popup_path(id: j.id, field: 'notify_contacts'), method: :get, local: false) do %>
              <button class="c-admin-edit-icon" aria-label="Edit publication contacts" alt="Edit publication contacts">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </button>
            <% end %>
          </div>
        </div>
      </td>
      <td>
        <div class="c-lined-table__with-actions">
          <div class="c-lined-table__data" id="review_contacts_<%= j.id %>">
            <%= j.review_contacts&.join(', ') %>
          </div>
          <div class="c-lined-table__actions">
            <%= form_with(url: journal_popup_path(id: j.id, field: 'review_contacts'), method: :get, local: false) do %>
              <button class="c-admin-edit-icon" aria-label="Edit PPR contacts" alt="Edit PPR contacts">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </button>
            <% end %>
          </div>
        </div>
      </td>
      <td>
        <div class="c-lined-table__with-actions">
          <div class="c-lined-table__data" id="default_to_ppr_<%= j.id %>">
            <span style="color: <%= j.default_to_ppr ? '#3c763d' : 'rgb(209, 44, 29)'%>">
              <%= j.default_to_ppr ? "True" : "False" %>
            </span>
          </div>
          <div class="c-lined-table__actions">
            <%= form_with(url: journal_popup_path(id: j.id, field: 'default_to_ppr'), method: :get, local: false) do %>
              <button class="c-admin-edit-icon" aria-label="Edit PPR default" alt="Edit PPR default">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </button>
            <% end %>
          </div>
        </div>
      </td>
      <td>
        <div class="c-lined-table__with-actions">
          <div class="c-lined-table__data" id="sponsor_id_<%= j.id %>">
            <%= j.sponsor&.name %>
          </div>
          <div class="c-lined-table__actions">
            <%= form_with(url: journal_popup_path(id: j.id, field: 'sponsor_id'), method: :get, local: false) do %>
              <button class="c-admin-edit-icon" aria-label="Edit sponsor" alt="Edit sponsor">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </button>
            <% end %>
          </div>
        </div>
      </td>
    </tr>
  <% end %>
</tbody>
</table>
</div>

