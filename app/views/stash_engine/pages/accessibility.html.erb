<% @page_title = 'Accessibility' %>
<% content_for(:doc_end) do %>
<script type="text/javascript">
  const form = document.getElementById('accessibility-email');
  form.addEventListener('submit', () => {
    const icon = document.createElement('i');
    icon.classList.add('fas', 'fa-spin', 'fa-circle-notch');
    icon.setAttribute('role', 'img');
    icon.setAttribute('aria-label', 'Loading...');
    icon.style.marginRight = '.5ch';
    form.querySelector('button').disabled = true;
    form.querySelector('button').prepend(icon);
  })
  const button = form.querySelector('button')
  button.addEventListener('click', (e) => {
    e.preventDefault();
    let body = 'URL of problem:\n'
    body += form.elements['url'].value
    body += '\n\nReport:\n'
    body += form.elements['report'].value
    form.elements['body'].value = body;
    form.requestSubmit();
  });
</script>
<% end %>
<%= render "layouts/page_columns", page_content: "accessibility" %>