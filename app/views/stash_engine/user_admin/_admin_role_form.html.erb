<% # local: user %>
<h1>Choose new role</h1>
<p>Set new role for user: <%= "#{user.first_name} #{user.last_name}".strip %></p>
<%
role_radios = [ ['superuser', 'Superuser — Has full access.'],
  ['curator', 'Curator — Has access to most features, though not some that are more dangerous.'],
  ['limited_curator', 'Limited Curator — like a curator, but no editing or auto-assignment of datasets'],
  ['tenant_curator', 'Tenant Curator — Can view and edit datasets in the associated tenant.'], 
  ['admin', 'Tenant Administrator — Can view datasets in the associated tenant.'],
  ['user', 'User — Can view published datasets. Can view and edit datasets they created.']
]
  role_radios.drop(1) if current_user.role == 'admin' # don't give admins a choice to make a superuser
%>

<%= form_with(url: user_admin_set_role_path(user.id), method: :post, local: false) do -%>
  <fieldset class="c-fieldset">
    <legend class="c-fieldset__legend">Roles:</legend>
    <% role_radios.each do |role| %>
        <%= radio_button_tag('role', role.first, user.role == role.first) %> <label for="<%= "role_#{role.first}" %>"><%= role[1] %></label></br>
    <% end %>
  </fieldset>
  <br/>
  <div class="c-modal__buttons-right">
    <%= submit_tag 'Submit', class: 'o-button__plain-text2' %>
    <%= button_tag 'Cancel', type: 'button', id: 'cancel_dialog', class: 'o-button__plain-text7' %>
  </div>
<% end %>

