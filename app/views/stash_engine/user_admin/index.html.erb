<% @page_title = "Manage Users" %>
<h1 class="o-heading__level1">Manage Users</h1>

<%= render partial: 'admin_head', locals: { stats: @stats} %>

<div>
  <h2>User Administration</h2>
  
  <%= form_with(url: stash_url_helpers.url_for(controller: '/stash_engine/user_admin', action: 'index', only_path: true),
                method: 'get', id: 'search_form', local: true ) do %>
    <label for="search-terms">User Search:</label>
    <%= search_field_tag(:q, params[:q], class: 'c-horizontal-form__input--search', id: 'search-terms' ) %>
    <%= submit_tag('Search', class: 'c-horizontal-form__input' ) %>
    
    <% params.except(:controller, :action, :q, :commit, :page, :page_size, :show_all, :sort, :direction, :all_advanced).each_pair do |k,v| %>
      <%= hidden_field_tag k, v, id: "search_#{k}" %>
    <% end %>
  <% end %>         

  
  <%= form_with(url: stash_url_helpers.user_merge_popup_path, method: :get, remote: true) do %>
    <%= hidden_field_tag 'merge_id1', 19201, id: "merge_id1" %>
    <%= hidden_field_tag 'merge_id2', 16137, id: "merge_id2" %>
    <button>
      Merge Selected
    </button>
  <% end %>  
    <!-- table and paging here -->
    <%= render partial: 'admin_user_table', locals: { users: @users } %>
    
    <div class="c-space-paginator">
      <%= paginate @users, params: {page_size: @page_size, show_all: false, show_last_page: false, remote: false} %>
    </div>


</div>

