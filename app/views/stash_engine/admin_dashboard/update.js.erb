<% if defined?(@curator_name) %>
  if (document.getElementById('dataset_curator_<%= @identifier.id %>')) {
    document.getElementById('dataset_curator_<%= @identifier.id %>').innerHTML = "<%= escape_javascript(render partial: 'table_curator', locals: { dataset: @resource, curator_name: @curator_name }) %>"
  }
<% end %>
if (document.getElementById('dataset_description_<%= @identifier.id %>')) {
  document.getElementById('dataset_description_<%= @identifier.id %>').innerHTML = "<%= escape_javascript(render partial: 'table_description', locals: { dataset: @resource }) %>"
}
if (document.getElementById('dataset_status_<%= @identifier.id %>')) {
  document.getElementById("dataset_status_<%= @identifier.id %>").innerHTML = "<%= escape_javascript(render partial: 'table_status', locals: { dataset: @resource }) %>"
}
if (document.getElementById('dataset_updated_<%= @identifier.id %>')) {
  document.getElementById('dataset_updated_<%= @identifier.id %>').innerHTML = "<%= formatted_datetime(@resource.last_curation_activity.updated_at) %>"
}
if (document.getElementById('dataset_published_<%= @identifier.id %>')) {
  document.getElementById('dataset_published_<%= @identifier.id %>').innerHTML = "<%= formatted_date(@identifier.date_last_published) %>"
}
if (document.getElementById('dataset_first_published_<%= @identifier.id %>')) {
  document.getElementById('dataset_first_published_<%= @identifier.id %>').innerHTML = "<%= formatted_date(@identifier.date_first_published) %>"
}
if (document.getElementById('dataset_pub_state_<%= @identifier.id %>')){
  document.getElementById('dataset_pub_state_<%= @identifier.id %>').innerHTML = "<%= @identifier.calculated_pub_state.upcase_first %>"
}
document.getElementById('genericModalDialog').close();
<% if @field == 'curation_activity' %>
  document.getElementById('curation_activity_button_<%=@identifier.id%>').focus()
  if(document.getElementById('curation_table')) {
    if($("#curation_table th[aria-sort='ascending']").length > 0){
      $('#curation_table tr:last').after("<%= escape_javascript(
        render partial: 'stash_engine/admin_datasets/activity_log_row', locals: { curation_activity: @curation_activity })
      %>");
    }else{
      $('#curation_table thead').after("<%= escape_javascript(
        render partial: 'stash_engine/admin_datasets/activity_log_row', locals: { curation_activity: @curation_activity })
      %>");
    }
  }
<% elsif @field == 'curator' %>
  document.getElementById('curator_button_<%=@identifier.id%>').focus()
<% end %>