// this changes the parts of the form that need to be changed so it converts it to a patch action (POST).

// It handles two different forms since we don't follow Datacite schema well and present different forms for the same item in datacite

<% if params[:contributor][:contributor_type] == 'sponsor' %>
  // this gets sponsor facility and there is only one
  var form = $('#contributor_facility_form');
<% else %>
  // this gets *funders* which there may be multiple
  <% form_id = unique_form_id(@contributor) %>
  var form = $('#<%= params[:form_id] %>');
  form.attr('id', '<%= form_id %>');
  form.find("#form_id").attr('value', '<%= form_id %>');
<% end %>

form.find("#contributor_id").attr('value', '<%= @contributor.id %>');
form.attr('action', '<%= contributors_update_path %>');

$('<input>').attr({
  type: 'hidden',
  name: '_method',
  value: 'patch'
}).appendTo(form);
